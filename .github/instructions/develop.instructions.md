---
applyTo: '**'
---

# Development Guidelines

## 1. Development Workflow

- Create a new branch for each feature
- Implement changes on that branch
- Commit each completed feature separately
- Merge back to main branch when all work is finished

## 2. Code Development Standards

### 2.1 General Principles
- Always understand the requirements before starting implementation
- Keep database structure and code models synchronized (Database First approach)
- Clean up old code thoroughly during refactoring to avoid confusion

### 2.2 Code Generation (jzero Workflow)
- **IMPORTANT**: Always follow this order:
  1. Update `desc/sql/*.sql` files (database schema)
  2. Update `desc/api/**/*.api` files (API definitions)
  3. Run `jzero gen` to generate code
  4. Implement business logic in `internal/logic/`
  
- **Never** modify files marked with `// Code generated by ***, DO NOT EDIT.`
- Generated files include:
  - `internal/model/**/*_gen.go` (database models)
  - `internal/handler/**/*_gen.go` (HTTP handlers)
  - `internal/types/**/*_gen.go` (request/response types)
  
- If you find issues in generated code, fix the source in `desc/` and regenerate with `jzero gen`

### 2.3 Database Management
- After creating a new database table, complete downstream tasks:
  - Run `jzero gen` to generate required code
  - Implement all related business logic
  - Update database-related sections in corresponding bash scripts
- Use independent migration scripts for database changes

### 2.4 Code Quality
- Add detailed comments to key logic (especially forward/reverse checks)
- Ensure error messages include specific identifiers (machine codes, IP addresses, etc.)

## 3. Testing Strategy

- Create dedicated test machines and test scripts (independent test data)
- Clean old data before each test to ensure repeatability
- Validate at multiple levels: API testing + database validation + log checking
- Test each feature point immediately after completion (incremental testing)

## 4. Documentation Guidelines

- Keep writing concise and clear
- Avoid duplicating content across multiple documents